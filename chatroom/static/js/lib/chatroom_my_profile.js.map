{"version":3,"sources":["../src/chatroom_my_profile.js"],"names":["$","document","ready","my_name","Math","random","toString","substr","replace","toUpperCase","toLowerCase","text","get_my_ip","keydown","event","keyCode","preventDefault","detect_name","console","log","alert","blur","selector","name_editor","name_text","test","length","get","done","ip","val"],"mappings":"AAAA;;AAEA;;AACAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB,QAAIC,UAAUC,KAAKC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqCC,OAArC,CAA6C,KAA7C,EAAmD,EAAnD,CAAd;AACAL,cAAUA,QAAQI,MAAR,CAAe,CAAf,EAAiB,CAAjB,EAAoBE,WAApB,KAAoCN,QAAQI,MAAR,CAAe,CAAf,EAAkBG,WAAlB,EAA9C;AACAP,eAAW,UAAX;AACAH,MAAE,cAAF,EAAkBW,IAAlB,CAAuBR,OAAvB;AACAS,cAAU,QAAV;AACH,CAND;;AAQA;AACAZ,EAAE,cAAF,EAAkBa,OAAlB,CAA0B,UAASC,KAAT,EAAgB;AACtC,QAAIA,MAAMC,OAAN,KAAkB,EAAtB,EAA0B;AACtBD,cAAME,cAAN,GADsB,CACC;AACvB,YAAIC,YAAY,cAAZ,CAAJ,EAAiC;AAC7Bd,sBAAUH,EAAE,IAAF,EAAQW,IAAR,EAAV;AACAO,oBAAQC,GAAR,CAAY,wBAAZ;AACAD,oBAAQC,GAAR,CAAYhB,OAAZ;AACAiB,0DAA4CjB,OAA5C;AACH;AACDH,UAAE,cAAF,EAAkBqB,IAAlB,GARsB,CAQG;AAC5B;AACJ,CAXD;;AAaA,SAASJ,WAAT,CAAqBK,QAArB,EAA+B;AAC3B,QAAIC,cAAcvB,EAAEsB,QAAF,CAAlB;AACA,QAAIE,YAAYD,YAAYZ,IAAZ,EAAhB;AACA,QAAI,YAAYc,IAAZ,CAAiBD,UAAUhB,OAAV,CAAkB,kBAAlB,EAAqC,EAArC,CAAjB,CAAJ,EAAgE;AAC5DU,gBAAQC,GAAR,CAAYK,SAAZ;AACAJ,cAAM,kBAAN;AACAG,oBAAYZ,IAAZ,CAAiBR,OAAjB;AACA,eAAO,KAAP;AACH;AACD,QAAIqB,UAAUE,MAAV,GAAmB,EAAvB,EAA2B;AACvBN,cAAM,iDAAN;AACAG,oBAAYZ,IAAZ,CAAiBa,UAAUjB,MAAV,CAAiB,CAAjB,EAAmB,EAAnB,CAAjB;AACA,eAAO,KAAP;AACH;AACD,WAAO,IAAP;AACH;;AAED,SAASK,SAAT,CAAmBU,QAAnB,EAA6B;AACzBtB,MAAE2B,GAAF,CAAM,YAAN,EACCC,IADD,CACM,UAASC,EAAT,EAAa;AACfX,gBAAQC,GAAR,CAAY,mBAAZ;AACAnB,UAAEsB,QAAF,EAAYX,IAAZ,CAAiBkB,EAAjB;AACA7B,UAAE,gBAAF,EAAoB8B,GAApB,CAAwBD,EAAxB;AACH,KALD;AAMH","file":"chatroom_my_profile.js","sourcesContent":["'use strict';\n\n// ========== generate name randomly and get ip ==========\n$(document).ready(function() {\n    let my_name = Math.random().toString(36).substr(2).replace(/\\d/g,'')\n    my_name = my_name.substr(0,1).toUpperCase() + my_name.substr(1).toLowerCase()\n    my_name += ' (guest)'\n    $('#name-editor').text(my_name)\n    get_my_ip('#my-ip')\n})\n\n// ========== update my name ==========\n$('#name-editor').keydown(function(event) {\n    if (event.keyCode === 13) {\n        event.preventDefault() /*prevent wrapping automatically*/\n        if (detect_name('#name-editor')) {\n            my_name = $(this).text()\n            console.log(\"update my name SUCCESS\");\n            console.log(my_name);\n            alert(`Name update completed!\\nNew name : ${my_name}`)\n        }\n        $('#name-editor').blur() /*stop focusing*/\n    }\n})\n\nfunction detect_name(selector) {\n    let name_editor = $(selector)\n    let name_text = name_editor.text()\n    if (/[^\\w ()]/g.test(name_text.replace(/[\\u4E00-\\u9FFF]/g,''))) {\n        console.log(name_text);\n        alert('Name is invalid!')\n        name_editor.text(my_name)\n        return false\n    }\n    if (name_text.length > 30) {\n        alert('Your name can not be longer than 30 characters!')\n        name_editor.text(name_text.substr(0,30))\n        return false\n    }\n    return true\n}\n\nfunction get_my_ip(selector) {\n    $.get('/get_my_ip')\n    .done(function(ip) {\n        console.log('get my ip SUCCESS');\n        $(selector).text(ip)\n        $('input[name=ip]').val(ip)\n    })\n}\n"]}